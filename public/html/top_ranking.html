<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TOP - 랭킹</title>
</head>
<body>
    <h1>테스트 랭킹 가져오기</h1>
    <div id="ranking"></div>
    <script>
        const rankingDiv = document.getElementById("ranking")
        const xhr = new XMLHttpRequest();
        const url = "http://localhost:9902/api/v1/top_ranking"
        const method = "GET"
        xhr.onload = function() {
            if(xhr.readyState === xhr.DONE){
                if(xhr.status === 200 || xhr.status === 201){
                    let results = xhr.responseText
                    results = JSON.parse(results)
                    console.log(results)
                    results = results.ranking
                    console.log(results)
                    results.forEach(result => {
                        let resultEl = document.createElement("div")
                        resultEl.innerHTML = result.ranking + "등 | 닉네임 : " + result.name + " | 점수 : " + result.score +"점"
                        rankingDiv.appendChild(resultEl)
                    });
                }else{
                    console.error(xhr.responseText)
                }
            }
        }
        xhr.open(method, url)
        xhr.send()

    </script>
</body>
</html>